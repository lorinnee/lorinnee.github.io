// La struttura dati principale
// I dati di ogni pagina sono i singoli elementi dell'array
// la pagina corrente (ie: l'indice nell'array) è nella variabile paginaCorrente)
// Solo la prima pagina è completa. Le altre devono essere (ovviamente) uguali
var data = [
  {
    domanda: "Nutri D011yX",
    rispostaSinistra: "Fieno",
    rispostaDestra: "Metallo",
    video: "video/scheda01.mp4",
    videoSinistra: "video/fieno.mp4",
    videoDestra: "video/metallo.mp4",
	primoBubble:"Partiamo con una domanda semplice",
	secondoBubble:"Cosa preferirebbe mangiare D011yX?",
	terzoBubble:"Cosa preferirebbe mangiare D011yX?",
	quartoBubble:"Cosa preferirebbe mangiare D011yX?",
	spriteUno:"immagini/b8.png",
	spriteDue:"immagini/a8.png",
	spriteTre:"immagini/a8.png",
	spriteQuattro:"immagini/a8.png",
	reactionSinistra:"Tsk, scelta prevedibile",
	reactionDestra:"...diamine.",
	spriteSinistra:"immagini/a4.png",
	spriteDestra:"immagini/a6.png",
  },
  {
    domanda: "Nascondi D011yX",
    rispostaSinistra: "Lampione",
    rispostaDestra: "Cespuglio",
	video: "video/scheda02.mp4",
	videoSinistra: "video/lampione.mp4",
    videoDestra: "video/cespuglio.mp4",
	primoBubble:"Oh nooo, c\'\u00E8 un lupo affamato di pixel!",
	secondoBubble:"Presto nascondi D011yX!",
	terzoBubble:"Presto nascondi D011yX!",
	quartoBubble:"Presto nascondi D011yX!",
	spriteUno:"immagini/b5.png",
	spriteDue:"immagini/b1.png",
	spriteTre:"immagini/b1.png",
	spriteQuattro:"immagini/b1.png",
	reactionSinistra:"Uhuh, scelta interessante, fortuna che \u00E8 2D",
	reactionDestra:"Bravo, d\'altronde questo lupo \u00E8 scemo ",
	spriteSinistra:"immagini/d4.png",
	spriteDestra:"immagini/b7.png",
  },
  {
    domanda: "Pulisci D011yX",
    rispostaSinistra: "Lava",
    rispostaDestra: "Tosa",
	video: "video/scheda03.mp4",
	videoSinistra: "video/detersivo.mp4",
    videoDestra: "video/rasoio.mp4",
	primoBubble:"D0llyX \u00E8 inciampata e rotolando in dei siti sozzi si \u00E8 sporcata",
	secondoBubble:"Scegli un modo per pulirla.",
	terzoBubble:"Scegli un modo per pulirla.",
	quartoBubble:"Scegli un modo per pulirla.",
	spriteUno:"immagini/a8.png",
	spriteDue:"immagini/a8.png",
	spriteTre:"immagini/a8.png",
	spriteQuattro:"immagini/a8.png",
	reactionSinistra:"Scemo, non lo sai che la lana si lava in acqua fredda?",
	reactionDestra:"Oh bel lavoro!",
	spriteSinistra:"immagini/c5.png",
	spriteDestra:"immagini/c3.png",
  },
   {
    domanda: "Aiuta D011yX",
    rispostaSinistra: "Veliero",
    rispostaDestra: "Zattera",
	video: "video/scheda04.mp4",
	videoSinistra: "video/veliero.mp4",
    videoDestra: "video/zattera.mp4",
	primoBubble:"D011yX vuole cambiare sponda, scegli il mezzo adatto ",
	secondoBubble:"Il veliero è un veliero, ovvero una barca che veleggia.",
	terzoBubble:"Le sue vele vanno a vela nelle vele che veleggiano.",
	quartoBubble:"Sai? quella zattera \u00E8 una copia del dipinto di Th\u00E8odore G\u00E8ricault.",
	spriteUno:"immagini/a8.png",
	spriteDue:"immagini/c1.png",
	spriteTre:"immagini/c1.png",
	spriteQuattro:"immagini/c1.png",
	reactionSinistra:"Ahrrrrr! Per tutti i bucanieri! Un lupo di mare! ",
	reactionDestra:"Chi sceglierebbe una zattera?",
	spriteSinistra:"immagini/c7.png",
	spriteDestra:"immagini/c5.png",
  },
  {
    domanda: "Conta le D011y",
    rispostaSinistra: "Trentadue",
    rispostaDestra: "Trentacinque",
	video: "video/scheda05.mp4",
	videoSinistra: "video/trentadue.mp4",
    videoDestra: "video/placeholder.mp4",
	primoBubble:"Per l\'occasione ho generato un tripudio di cloni, vediamo se sai contare.",
	secondoBubble:"Speriamo non facciano la stessa fine della Dolly creata da voi umani.",
	terzoBubble:"Speriamo non facciano la stessa fine della Dolly creata da voi umani.",
	quartoBubble:"Speriamo non facciano la stessa fine della Dolly creata da voi umani.",
	spriteUno:"immagini/a3.png",
	spriteDue:"immagini/c1.png",
	spriteTre:"immagini/c1.png",
	spriteQuattro:"immagini/c1.png",
	reactionSinistra:"Pare di no...ma ti vengo incontro",
	reactionDestra:"destra",
	spriteSinistra:"immagini/a2.png",
	spriteDestra:"immagini/a4.png",
  },
  {
    domanda: "Colora D011yX",
    rispostaSinistra: "&#128149",
    rispostaDestra: "&#127752",
	video: "video/scheda06.mp4",
	videoSinistra: "video/cuori.mp4",
    videoDestra: "video/arcobaleno.mp4",
	primoBubble:"Dopo tutti i test, la lettera di serie di D011y si \u00E8 cancellata.",
	secondoBubble:"Scegli un nuovo simbolo identificativo.",
	terzoBubble:"Scegli un nuovo simbolo identificativo.",
	quartoBubble:"Scegli un nuovo simbolo identificativo.",
	spriteUno:"immagini/c6.png",
	spriteDue:"immagini/c5.png",
	spriteTre:"immagini/c5.png",
	spriteQuattro:"immagini/c5.png",
	reactionSinistra:"Ottima scelta, hai stile!",
	reactionDestra:"Ottima scelta, hai stile!",
	spriteSinistra:"immagini/d2.png",
	spriteDestra:"immagini/d2.png",
  },
   {
    domanda: "Conta D011y",
    rispostaSinistra: "Zero",
    rispostaDestra: "Una",
	video: "video/scheda07.mp4",
	videoSinistra: "video/cadute.mp4",
    videoDestra: "video/una.mp4",
	primoBubble:"Voi umani utilizzate questo strano metodo per addormentarvi",
	secondoBubble:"Ma vi siete mai chiesti le pecore dove vanno a finire?",
	terzoBubble:"Contale e scopri cosa succede.",
	quartoBubble:"Contale e scopri cosa succede.",
	spriteUno:"immagini/c4.png",
	spriteDue:"immagini/b4.png",
	spriteTre:"immagini/a4.png",
	spriteQuattro:"immagini/a4.png",
	reactionSinistra:"Oh, guarda! Un gregge di pecore morte!",
	reactionDestra:"Risposta esatta! Guarda D011yX, sembra uno stupido criceto.",
	spriteSinistra:"immagini/a2.png",
	spriteDestra:"immagini/a4.png",
  },
   {
    domanda: "Salva D011yX",
    rispostaSinistra: "Filo blu",
    rispostaDestra: "Filo rosso",
	video: "video/scheda08.mp4",
	videoSinistra: "video/filo.mp4",
    videoDestra: "video/filo.mp4",
	primoBubble:"Il malvagio hacker R3t3p ha installato una bomba su D011yX,",
	secondoBubble:"disinnesca la bomba, tagliando il filo giusto.",
	terzoBubble:"disinnesca la bomba, tagliando il filo giusto.",
	quartoBubble:"disinnesca la bomba, tagliando il filo giusto.",
	spriteUno:"immagini/b5.png",
	spriteDue:"immagini/d5.png",
	spriteTre:"immagini/d5.png",
	spriteQuattro:"immagini/d5.png",
	reactionSinistra:"...Come hai fatto a sbagliare?",
	reactionDestra:"...Come hai fatto a sbagliare?",
	spriteSinistra:"immagini/c5.png",
	spriteDestra:"immagini/c5.png",
  },
   {
    domanda: "Cura D011yX",
    rispostaSinistra: "Fiori",
    rispostaDestra: "Fieno",
	video: "video/scheda09.mp4",
	videoSinistra: "video/fiori.mp4",
    videoDestra: "video/fieno02.mp4",
	primoBubble:"D011yX sembra un po\' sfiancata, forse del cibo l\'aiuter\u00E0.",
	secondoBubble:"D011yX sembra un po\' sfiancata, forse del cibo l\'aiuter\u00E0.",
	terzoBubble:"D011yX sembra un po\' sfiancata, forse del cibo l\'aiuter\u00E0.",
	quartoBubble:"D011yX sembra un po\' sfiancata, forse del cibo l\'aiuter\u00E0.",
	spriteUno:"immagini/c4.png",
	spriteDue:"immagini/c4.png",
	spriteTre:"immagini/c4.png",
	spriteQuattro:"immagini/c4.png",
	reactionSinistra:"Ah non \u00E8 servito a molto, ma forse le far\u00E0 comunque piacere.",
	reactionDestra:"Ah non \u00E8 servito a molto, ma forse le far\u00E0 comunque piacere.",
	spriteSinistra:"immagini/a4.png",
	spriteDestra:"immagini/a4.png",
  },
];
// inizializza la pagina corrente (viene caricata sotto)
var paginaCorrente = 0;
var sorgente = document.getElementById("source");

//variabili del timer
var due;
var tre;
var quattro;


// Funziona che carica la paginaCorrente
function caricaPaginaCorrente() {
  document.getElementById("domanda").innerHTML = data[paginaCorrente].domanda;
  document.getElementById("button_left").innerHTML =
    data[paginaCorrente].rispostaSinistra;
	 document.getElementById("button_left").disabled=false;
	document.getElementById("button_right").innerHTML =
    data[paginaCorrente].rispostaDestra;
	 document.getElementById("button_right").disabled=false;
  sorgente.setAttribute("src", data[paginaCorrente].video);
  document.getElementById("bubble").innerHTML = data[paginaCorrente].primoBubble;
  document.getElementById("robot").src= data[paginaCorrente].spriteUno;
  due = setTimeout(testiBubbleDue, 6000);
  tre = setTimeout(testiBubbleTre, 12000);
  quattro = setTimeout(testiBubbleQuattro, 18000);
 }
 
// carica la prima pagina (viene eseguito al load)
caricaPaginaCorrente();



function testiBubbleDue() {
  document.getElementById("bubble").innerHTML = data[paginaCorrente].secondoBubble;
  document.getElementById("robot").src= data[paginaCorrente].spriteDue;
}
function testiBubbleTre() {
 document.getElementById("bubble").innerHTML = data[paginaCorrente].terzoBubble;
  document.getElementById("robot").src= data[paginaCorrente].spriteTre;
}
function testiBubbleQuattro() {
 document.getElementById("bubble").innerHTML = data[paginaCorrente].quartoBubble;
 document.getElementById("robot").src= data[paginaCorrente].spriteQuattro;
}




function changeVideo(pulsante) {
  console.log(pulsante);
  if (pulsante == "button_left") {
    sorgente.setAttribute("src", data[paginaCorrente].videoSinistra);
	document.getElementById("button_left").disabled=true;
	document.getElementById("button_right").disabled=true;
	document.getElementById("bubble").innerHTML = data[paginaCorrente].reactionSinistra;
	document.getElementById("robot").src= data[paginaCorrente].spriteSinistra;
	window.setTimeout(change, 5000);
	stop();
	
  } else if (pulsante == "button_right") {
    sorgente.setAttribute("src", data[paginaCorrente].videoDestra);
	document.getElementById("button_left").disabled=true;
	document.getElementById("button_right").disabled=true;
	document.getElementById("bubble").innerHTML = data[paginaCorrente].reactionDestra;
	document.getElementById("robot").src= data[paginaCorrente].spriteDestra;
	window.setTimeout(change, 5000);
	stop();
	
  } else {
    alert(
      "Questo non può accadere. Controlla (o dici di controllare) il codice! :)"
    );
  }
}
 
 function stop() {
  clearTimeout(due);
  clearTimeout(tre);
 clearTimeout(quattro);
}


function change() {
 if (paginaCorrente != 8){
  paginaCorrente += 1;
  caricaPaginaCorrente();
 } else {
   nuova();
   }
}


function nuova(){
	document.location="scheda_indovinello.html";
}

